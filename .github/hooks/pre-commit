#!/usr/bin/env bash

branch="$(git rev-parse --abbrev-ref HEAD)"

if [ "$branch" = "master"  ]; then
      echo "You can't commit directly to master branch"
      exit 1
fi

if $(awk -F"[<>]" '/EMAIL/ {getline;print {}' workflow/info.plist | grep -q -v @); then
    echo "You can't commit an email address in the workflow/info.plist (Workflow config)."
    exit 1
fi
